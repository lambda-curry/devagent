{
  "extends": "generic-ralph-loop.json",
  "epic": {
    "id": "devagent-hub-e2e-3",
    "title": "Ralph E2E Orchestration Hub v3",
    "description": "Objective Orchestrator Hub for E2E testing. Plan: .devagent/workspace/tests/ralph-e2e/orchestration/plan/canonical-orchestration-plan.md\n\nThis hub orchestrates two sequential epics:\n- Epic A: Create static data file\n- Epic B: Consume and verify the data file\n\nExpectations: .devagent/workspace/tests/ralph-e2e/orchestration/expectations/expectations.md"
  },
  "epics": [
    {
      "id": "devagent-orch-a-v2",
      "title": "Epic A: Data Foundation",
      "description": "Create a static data file for Epic B to consume. Branch: feature/orch-a",
      "parent_id": "devagent-hub-e2e-3"
    },
    {
      "id": "devagent-orch-b-v2",
      "title": "Epic B: Data Consumer",
      "description": "Verify the data from Epic A is accessible. Branch: feature/orch-b",
      "parent_id": "devagent-hub-e2e-3"
    }
  ],
  "tasks": [
    {
      "id": "devagent-hub-e2e-3.sync",
      "title": "Setup & Sync",
      "objective": "Create the tree using setup-loop.ts and verify the Hub Epic contains tasks for kicking off and merging devagent-orch-a and devagent-orch-b.",
      "role": "project-manager",
      "labels": ["objective-planner"],
      "dependencies": ["setup-pr"]
    },
    {
      "id": "devagent-orch-a-v2.1",
      "title": "Create orch-test.json",
      "objective": "Create apps/ralph-monitoring/public/orch-test.json with content: { \"hello\": \"world\" }. Branch: feature/orch-a",
      "role": "engineering",
      "parent_id": "devagent-orch-a-v2",
      "dependencies": ["devagent-hub-e2e-3.sync"]
    },
    {
      "id": "devagent-orch-a-v2.close",
      "title": "Wrap up & Close Epic A",
      "objective": "Ensure all Epic A tasks are done and close the epic to unblock dependents. Branch: feature/orch-a",
      "role": "project-manager",
      "parent_id": "devagent-orch-a-v2",
      "dependencies": ["devagent-orch-a-v2.1"]
    },
    {
      "id": "devagent-hub-e2e-3.merge-a",
      "title": "Merge Epic A to Hub",
      "objective": "Merge feature/orch-a into feature/hub-e2e-3 using non-fast-forward merge (--no-ff). Hub Branch: feature/hub-e2e-3",
      "role": "project-manager",
      "labels": ["branch-manager"],
      "dependencies": ["devagent-orch-a-v2.close"]
    },
    {
      "id": "devagent-orch-b-v2.1",
      "title": "Create orch-verify.test.ts",
      "objective": "Create a test in apps/ralph-monitoring/app/lib/__tests__/orch-verify.test.ts that reads the JSON from apps/ralph-monitoring/public/orch-test.json and asserts the content. Branch: feature/orch-b",
      "role": "engineering",
      "parent_id": "devagent-orch-b-v2",
      "dependencies": ["devagent-hub-e2e-3.merge-a"]
    },
    {
      "id": "devagent-orch-b-v2.close",
      "title": "Wrap up & Close Epic B",
      "objective": "Ensure all Epic B tasks are done and close the epic to unblock dependents. Branch: feature/orch-b",
      "role": "project-manager",
      "parent_id": "devagent-orch-b-v2",
      "dependencies": ["devagent-orch-b-v2.1"]
    },
    {
      "id": "devagent-hub-e2e-3.merge-b",
      "title": "Merge Epic B to Hub",
      "objective": "Merge feature/orch-b into feature/hub-e2e-3 using non-fast-forward merge (--no-ff). Hub Branch: feature/hub-e2e-3",
      "role": "project-manager",
      "labels": ["branch-manager"],
      "dependencies": ["devagent-orch-b-v2.close"]
    },
    {
      "id": "devagent-hub-e2e-3.summary",
      "title": "Final Summary",
      "objective": "Document coordination success and close the objective.",
      "role": "project-manager",
      "labels": ["epic-coordinator"],
      "dependencies": ["devagent-hub-e2e-3.merge-b"]
    }
  ],
  "loop": {
    "teardownTasks": [
      {
        "id": "devagent-hub-e2e-3.teardown-report",
        "title": "Generate Epic Revise Report",
        "objective": "Generate the final revise report aggregating all revision learnings, commits, and quality gate results from the epic execution.",
        "role": "project-manager",
        "acceptance_criteria": [
          "All child tasks are closed or blocked",
          "Report generated in .devagent/workspace/reviews/",
          "Report includes all revision learnings and commits",
          "Epic status updated appropriately based on task completion"
        ],
        "dependencies": ["devagent-hub-e2e-3.summary"],
        "labels": [],
        "metadata": {}
      }
    ]
  }
}
